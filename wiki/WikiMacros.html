
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title> Wiki Macros - libRocket</title>
<link rel="start" href="http://librocket.com/wiki"/><link rel="search" href="http://librocket.com/search"/><link rel="help" href="TracGuide.html"/><link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css"/><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css"/><link rel="icon" href="../chrome/site/trac.ico" type="image/x-icon"/><link rel="shortcut icon" href="../chrome/site/trac.ico" type="image/x-icon"/><link rel="alternate" href="WikiMacros%3Fformat=txt" title="Plain Text" type="text/x-trac-wiki"/><style type="text/css">
</style>
<script type="text/javascript" src="../chrome/common/js/trac.js"></script>
<link rel="stylesheet" type="text/css" href="../chrome/site/style/base.css"></link>
<link rel="stylesheet" type="text/css" href="../chrome/site/style/content.css"></link>
<link rel="stylesheet" type="text/css" href="../chrome/site/style/discussion.css"></link>
<style>
		div.wiki img
		{
			display: block;
			margin-left: auto;
			margin-right: auto;
		}
	</style>
</head>
<body>
<div class="widthshell-width">
<div class="widthshell-minwidth">
<div class="widthshell-layout">
<div class="widthshell-container">
<div class="widthshell-content">
<div id="background">
<div style="float:right;width:160px;height:600px;margin-top:110px;margin-right:20px;">
<script type="text/javascript"><!--
                        google_ad_client = "pub-5872045433470541";
                        /* Default, Wide Skyscraper */
                        google_ad_slot = "3956485030";
                        google_ad_width = 160;
                        google_ad_height = 600;
                //-->
                </script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
</div>
<div class="shell">
<div class="stars">
<img id="star-1" src="../chrome/site/images/star-red-medium.gif" width="22px" height="22px" alt="Star"/>
<img id="star-2" src="../chrome/site/images/star-red-small.gif" width="13px" height="13px" alt="Star"/>
<img id="star-3" src="../chrome/site/images/star-red-small.gif" width="11px" height="11px" alt="Star"/>
<img id="star-4" src="../chrome/site/images/star-orange-small.gif" width="16px" height="16px" alt="Star"/>
<img id="star-5" src="../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-6" src="../chrome/site/images/star-red-tiny.gif" width="8px" height="7px" alt="Star"/>
<img id="star-7" src="../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-8" src="../chrome/site/images/star-red-big.gif" width="33px" height="33px" alt="Star"/>
<img id="star-9" src="../chrome/site/images/star-red-small.gif" width="13px" height="13px" alt="Star"/>
<img id="star-10" src="../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-11" src="../chrome/site/images/star-red-tiny.gif" width="8px" height="7px" alt="Star"/>
<img id="star-12" src="../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
</div>
<div id="header">
<a href="documentation.html"><img id="title" src="../chrome/site/images/title.gif" width="256px" height="49px" alt="Rocket"/></a>
<ul class="top-level-nav">
<li><a href="frontend/features.html">features.</a></li>

<li><a href="http://github.com/lloydw/librocket">download.</a></li>
<li><a href="http://forums.librocket.com">forums.</a></li>
<li><a href="documentation.html">developer.</a></li>
</ul>
<img id="trail" src="../chrome/site/images/trail-content.gif" width="72px" height="115px" alt="Rocket Trail"/>
<a href="documentation.html"><img id="rocket" src="../chrome/site/images/rocket-content.gif" width="126px" height="139px" alt="Rocket"/></a>
</div>
</div>
</div>
<div class="shell">
<div id="banner">
<div class="stars">
<img id="star-13" src="../chrome/site/images/star-black-big.gif" width="49px" height="50px" alt="Star"/>
<img id="star-14" src="../chrome/site/images/star-black-medium.gif" width="23px" height="23px" alt="Star"/>
<img id="star-15" src="../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-16" src="../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-17" src="../chrome/site/images/star-black-medium.gif" width="21px" height="21px" alt="Star"/>
<img id="star-18" src="../chrome/site/images/star-black-tiny.gif" width="13px" height="13px" alt="Star"/>
<img id="star-19" src="../chrome/site/images/star-black-tiny.gif" width="9px" height="9px" alt="Star"/>
<img id="star-20" src="../chrome/site/images/star-black-tiny.gif" width="10px" height="10px" alt="Star"/>
<img id="star-21" src="../chrome/site/images/star-black-medium.gif" width="21px" height="21px" alt="Star"/>
<img id="star-22" src="../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-23" src="../chrome/site/images/star-black-small.gif" width="13px" height="13px" alt="Star"/>
</div>
<img id="banner-bottom-left" src="../chrome/site/images/banner-bottom-left.gif" width="20px" height="19px" alt="Bottom left banner image"/>
<img id="banner-bottom-right" src="../chrome/site/images/banner-bottom-right.gif" width="20px" height="19px" alt="Bottom right banner image"/>
<div id="login"><a href="http://librocket.com/login">Login</a> | <a "http://librocket.com/wiki/href">Register</a></div>
<div id="breadcrumbs">
<a href="WikiMacros.html">WikiMacros</a></div>
<div id="title"> Wiki Macros</div>
<div id="second-level-nav">
<span class="nav-item active"><a href="documentation.html">Documentation</a></span>
<span class="nav-item"><a accesskey="4" href="http://librocket.com/search">Search</a></span>
</div>
</div>
<div id="content-container">
<div id="content" class="wiki">
<div class="wikipage">
<div id="searchable"><h1 id="WikiMacros">Wiki Macros</h1>
<p>
Trac macros are plugins to extend the Trac engine with custom 'functions' written in Python. A macro inserts dynamic HTML data in any context supporting <a class="wiki" href="WikiFormatting.html">WikiFormatting</a>.
</p>
<p>
Another kind of macros are <a class="wiki" href="WikiProcessors.html">WikiProcessors</a>. They typically deal with alternate markup formats and representation of larger blocks of information (like source code highlighting).
</p>
<h2 id="UsingMacros">Using Macros</h2>
<p>
Macro calls are enclosed in two <i>square brackets</i>. Like Python functions, macros can also have arguments, a comma separated list within parentheses.
</p>
<h3 id="Examples">Examples</h3>
<pre class="wiki"> [[Timestamp]]
</pre><p>
Display:
</p>
<blockquote>
<p>
<b>Wed Aug 30 20:41:20 2017</b>
</p>
</blockquote>
<pre class="wiki"> [[HelloWorld(Testing)]]
</pre><p>
Display:
</p>
<blockquote>
<p>
Hello World, args = Testing
</p>
</blockquote>
<h2 id="AvailableMacros">Available Macros</h2>
<p>
<i>Note that the following list will only contain the macro documentation if you've not enabled <tt>-OO</tt> optimizations, or not set the <tt>PythonOptimize</tt> option for <a class="wiki" href="TracModPython.html">mod_python</a>.</i>
</p>
<p>
<dl><dt id="InterTrac-macro"><code>[[InterTrac]]</code></dt><dd><p>
Provide a list of known <a class="wiki" href="InterTrac.html">InterTrac</a> prefixes.
</p>
</dd><dt id="TitleIndex-macro"><code>[[TitleIndex]]</code></dt><dd><p>
Inserts an alphabetic list of all wiki pages into the output.
</p>
<p>
Accepts a prefix string as parameter: if provided, only pages with names
that start with the prefix are included in the resulting list. If this
parameter is omitted, all pages are listed.
</p>
</dd><dt id="RecentChanges-macro"><code>[[RecentChanges]]</code></dt><dd><p>
Lists all pages that have recently been modified, grouping them by the
day they were last modified.
</p>
<p>
This macro accepts two parameters. The first is a prefix string: if
provided, only pages with names that start with the prefix are included in
the resulting list. If this parameter is omitted, all pages are listed.
</p>
<p>
The second parameter is a number for limiting the number of pages returned.
For example, specifying a limit of 5 will result in only the five most
recently changed pages to be included in the list.
</p>
</dd><dt id="PageOutline-macro"><code>[[PageOutline]]</code></dt><dd><p>
Displays a structural outline of the current wiki page, each item in the
outline being a link to the corresponding heading.
</p>
<p>
This macro accepts three optional parameters:
</p>
<ul><li>The first is a number or range that allows configuring the minimum and
maximum level of headings that should be included in the outline. For
example, specifying "1" here will result in only the top-level headings
being included in the outline. Specifying "2-3" will make the outline
include all headings of level 2 and 3, as a nested list. The default is
to include all heading levels.
</li><li>The second parameter can be used to specify a custom title (the default
is no title).
</li><li>The third parameter selects the style of the outline. This can be
either <tt>inline</tt> or <tt>pullout</tt> (the latter being the default). The <tt>inline</tt>
style renders the outline as normal part of the content, while <tt>pullout</tt>
causes the outline to be rendered in a box that is by default floated to
the right side of the other content.
</li></ul></dd><dt id="Image-macro"><code>[[Image]]</code></dt><dd><p>
Embed an image in wiki-formatted text.
</p>
<p>
The first argument is the file specification. The file specification may
reference attachments or files in three ways:
</p>
<ul><li><tt>module:id:file</tt>, where module can be either <strong>wiki</strong> or <strong>ticket</strong>,
to refer to the attachment named <i>file</i> of the specified wiki page or
ticket.
</li><li><tt>id:file</tt>: same as above, but id is either a ticket shorthand or a Wiki
page name.
</li><li><tt>file</tt> to refer to a local attachment named 'file'. This only works from
within that wiki page or a ticket.
</li></ul><p>
Also, the file specification may refer to repository files, using the
<tt>source:file</tt> syntax (<tt>source:<a href="http://librocket.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c9afa0a5ac89bbacbf">[email&#160;protected]</a></tt> works also).
</p>
<p>
The remaining arguments are optional and allow configuring the attributes
and style of the rendered <tt>&lt;img&gt;</tt> element:
</p>
<ul><li>digits and unit are interpreted as the size (ex. 120, 25%)
for the image
</li><li><tt>right</tt>, <tt>left</tt>, <tt>top</tt> or <tt>bottom</tt> are interpreted as the alignment for
the image
</li><li><tt>nolink</tt> means without link to image source.
</li><li><tt>key=value</tt> style are interpreted as HTML attributes or CSS style
</li></ul><blockquote>
<blockquote>
<p>
indications for the image. Valid keys are:
</p>
</blockquote>
</blockquote>
<ul><li>align, border, width, height, alt, title, longdesc, class, id
and usemap
</li><li><tt>border</tt> can only be a number
</li></ul><p>
Examples:
</p>
<pre class="wiki">    [[Image(photo.jpg)]]                           # simplest
    [[Image(photo.jpg, 120px)]]                    # with size
    [[Image(photo.jpg, right)]]                    # aligned by keyword
    [[Image(photo.jpg, nolink)]]                   # without link to source
    [[Image(photo.jpg, align=right)]]              # aligned by attribute
</pre><p>
You can use image from other page, other ticket or other module.
</p>
<pre class="wiki">    [[Image(OtherPage:foo.bmp)]]    # if current module is wiki
    [[Image(base/sub:bar.bmp)]]     # from hierarchical wiki page
    [[Image(#3:baz.bmp)]]           # if in a ticket, point to #3
    [[Image(ticket:36:boo.jpg)]]
    [[Image(source:/images/bee.jpg)]] # straight from the repository!
    [[Image(htdocs:foo/bar.png)]]   # image file in project htdocs dir.
</pre><p>
<i>Adapted from the Image.py macro created by Shun-ichi Goto
&lt;<a href="http://librocket.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="baddd5ced5d2facedbd3c3d594d9d594d0ca">[email&#160;protected]</a>&gt;</i>
</p>
</dd><dt id="MacroList-macro"><code>[[MacroList]]</code></dt><dd><p>
Displays a list of all installed Wiki macros, including documentation if
available.
</p>
<p>
Optionally, the name of a specific macro can be provided as an argument. In
that case, only the documentation for that macro will be rendered.
</p>
<p>
Note that this macro will not be able to display the documentation of
macros if the <tt>PythonOptimize</tt> option is enabled for mod_python!
</p>
</dd><dt id="TracIni-macro"><code>[[TracIni]]</code></dt><dd><p>
Produce documentation for Trac configuration file.
</p>
<p>
Typically, this will be used in the <a class="wiki" href="TracIni.html">TracIni</a> page.
Optional arguments are a configuration section filter,
and a configuration option name filter: only the configuration
options whose section and name start with the filters are output.
</p>
</dd><dt id="Timestamp-macro"><code>[[Timestamp]]</code></dt><dd><p>
Inserts the current time (in seconds) into the wiki page.
</p>
</dd><dt id="HelloWorld-macro"><code>[[HelloWorld]]</code></dt><dd><p>
Example macro.
</p>
</dd><dt id="TracGuideToc-macro"><code>[[TracGuideToc]]</code></dt><dd><p>
This macro shows a quick and dirty way to make a table-of-contents for a set
of wiki pages.
</p>
</dd><dt id="TracAdminHelp-macro"><code>[[TracAdminHelp]]</code></dt><dd><p>
Displays help for trac-admin commands.
</p>
<p>
Examples:
</p>
<pre class="wiki">[[TracAdminHelp]]               # all commands
[[TracAdminHelp(wiki)]]         # all wiki commands
[[TracAdminHelp(wiki export)]]  # the "wiki export" command
[[TracAdminHelp(upgrade)]]      # the upgrade command
</pre></dd><dt id="InterWiki-macro"><code>[[InterWiki]]</code></dt><dd><p>
Provide a description list for the known <a class="wiki" href="InterWiki.html">InterWiki</a> prefixes.
</p>
</dd></dl>
</p>
<h2 id="Macrosfromaroundtheworld">Macros from around the world</h2>
<p>
The <a class="ext-link" href="http://trac-hacks.org/"><span class="icon">Trac Hacks</span></a> site provides a wide collection of macros and other Trac <a class="wiki" href="TracPlugins.html">plugins</a> contributed by the Trac community. If you're looking for new macros, or have written one that you'd like to share with the world, please don't hesitate to visit that site.
</p>
<h2 id="DevelopingCustomMacros">Developing Custom Macros</h2>
<p>
Macros, like Trac itself, are written in the <a class="ext-link" href="http://www.python.org/"><span class="icon">Python programming language</span></a>. They are very simple modules, identified by the filename and should contain a single <tt>execute()</tt> function. Trac will display the returned data inserted into the HTML representation of the Wiki page where the macro is called.
</p>
<p>
It's easiest to learn from an example:
</p>
<div class="code"><pre># MyMacro.py -- The world's simplest macro

def execute(hdf, args, env):
    return &#34;Hello World called with args: %s&#34; % args
</pre></div><p>
You can also use the environment (<tt>env</tt>) object, for example to access configuration data and the database, for example:
</p>
<div class="code"><pre>def execute(hdf, txt, env):
    return env.config.get('trac', 'repository_dir')
</pre></div><p>
Note that since version 0.9, wiki macros can also be written as <a class="wiki" href="TracPlugins.html">TracPlugins</a>. This gives them some capabilities that “classic” macros do not have, such as being able to directly access the HTTP request.
</p>
<p>
For more information about developing macros, see the <a class="ext-link" href="http://projects.edgewall.com/trac/wiki/TracDev"><span class="icon">development resources</span></a> on the main project site.
</p>
<hr/>
<p>
See also: <a class="wiki" href="WikiProcessors.html">WikiProcessors</a>, <a class="wiki" href="WikiFormatting.html">WikiFormatting</a>, <a class="wiki" href="TracGuide.html">TracGuide</a>
</p>
</div>
</div>
<script>!function(e,t,r,a,n,c,l,o){function h(e,t,r,a){for(r='',a='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^a); return r}try{for(n=e.getElementsByTagName('a'),l='/cdn-cgi/l/email-protection#',o=l.length,a=0;a<n.length;a++)try{c=n[a],t=c.href.indexOf(l),t>-1&&(c.href='mailto:'+h(c.href,t+o))}catch(f){}for(n=Array.prototype.slice.apply(e.getElementsByClassName('__cf_email__')),a=0;a<n.length;a++)try{c=n[a],c.parentNode.replaceChild(e.createTextNode(h(c.getAttribute('data-cfemail'),0)),c)}catch(f){}}catch(f){}}(document)</script><script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
</div>
</div>
</div>
<div id="footer">
<a id="tracpowered" href="http://trac.edgewall.org/">
<img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered"/>
</a>
<p class="left">
Powered by <a href="http://librocket.com/about"><strong>Trac </strong></a><br/>By <a href="http://www.edgewall.org/">Edgewall Software</a>.
</p>
<p id="copyright" class="left clear">
Copyright &copy; 2007-2010 Code Point Ltd, Shift Technology Ltd.
</p>
<ul class="top-level-nav">
<li><a href="frontend/features.html">features.</a></li>
<li><a "http://librocket.com/wiki/href">download.</a></li>
<li><a href="http://forums.librocket.com">forums.</a></li>
<li><a href="documentation.html">developer.</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-3379591-1");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>
</body>
</html>
