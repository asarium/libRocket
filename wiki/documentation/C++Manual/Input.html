
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title> Input - libRocket</title>
<link rel="start" href="http://librocket.com/wiki"/><link rel="search" href="http://librocket.com/search"/><link rel="help" href="../../TracGuide.html"/><link rel="stylesheet" href="../../../chrome/common/css/trac.css" type="text/css"/><link rel="stylesheet" href="../../../chrome/common/css/wiki.css" type="text/css"/><link rel="icon" href="../../../chrome/site/trac.ico" type="image/x-icon"/><link rel="shortcut icon" href="../../../chrome/site/trac.ico" type="image/x-icon"/><link rel="alternate" href="Input%3Fformat=txt" title="Plain Text" type="text/x-trac-wiki"/><style type="text/css">
</style>
<script type="text/javascript" src="../../../chrome/common/js/trac.js"></script>
<link rel="stylesheet" type="text/css" href="../../../chrome/site/style/base.css"></link>
<link rel="stylesheet" type="text/css" href="../../../chrome/site/style/content.css"></link>
<link rel="stylesheet" type="text/css" href="../../../chrome/site/style/discussion.css"></link>
<style>
		div.wiki img
		{
			display: block;
			margin-left: auto;
			margin-right: auto;
		}
	</style>
</head>
<body>
<div class="widthshell-width">
<div class="widthshell-minwidth">
<div class="widthshell-layout">
<div class="widthshell-container">
<div class="widthshell-content">
<div id="background">
<div style="float:right;width:160px;height:600px;margin-top:110px;margin-right:20px;">
<script type="text/javascript"><!--
                        google_ad_client = "pub-5872045433470541";
                        /* Default, Wide Skyscraper */
                        google_ad_slot = "3956485030";
                        google_ad_width = 160;
                        google_ad_height = 600;
                //-->
                </script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
</div>
<div class="shell">
<div class="stars">
<img id="star-1" src="../../../chrome/site/images/star-red-medium.gif" width="22px" height="22px" alt="Star"/>
<img id="star-2" src="../../../chrome/site/images/star-red-small.gif" width="13px" height="13px" alt="Star"/>
<img id="star-3" src="../../../chrome/site/images/star-red-small.gif" width="11px" height="11px" alt="Star"/>
<img id="star-4" src="../../../chrome/site/images/star-orange-small.gif" width="16px" height="16px" alt="Star"/>
<img id="star-5" src="../../../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-6" src="../../../chrome/site/images/star-red-tiny.gif" width="8px" height="7px" alt="Star"/>
<img id="star-7" src="../../../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-8" src="../../../chrome/site/images/star-red-big.gif" width="33px" height="33px" alt="Star"/>
<img id="star-9" src="../../../chrome/site/images/star-red-small.gif" width="13px" height="13px" alt="Star"/>
<img id="star-10" src="../../../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
<img id="star-11" src="../../../chrome/site/images/star-red-tiny.gif" width="8px" height="7px" alt="Star"/>
<img id="star-12" src="../../../chrome/site/images/star-red-tiny.gif" width="7px" height="6px" alt="Star"/>
</div>
<div id="header">
<a href="../../documentation.html"><img id="title" src="../../../chrome/site/images/title.gif" width="256px" height="49px" alt="Rocket"/></a>
<ul class="top-level-nav">
<li><a href="../../frontend/features.html">features.</a></li>

<li><a href="http://github.com/lloydw/librocket">download.</a></li>
<li><a href="http://forums.librocket.com">forums.</a></li>
<li><a href="../../documentation.html">developer.</a></li>
</ul>
<img id="trail" src="../../../chrome/site/images/trail-content.gif" width="72px" height="115px" alt="Rocket Trail"/>
 <a href="../../documentation.html"><img id="rocket" src="../../../chrome/site/images/rocket-content.gif" width="126px" height="139px" alt="Rocket"/></a>
</div>
</div>
</div>
<div class="shell">
<div id="banner">
<div class="stars">
<img id="star-13" src="../../../chrome/site/images/star-black-big.gif" width="49px" height="50px" alt="Star"/>
<img id="star-14" src="../../../chrome/site/images/star-black-medium.gif" width="23px" height="23px" alt="Star"/>
<img id="star-15" src="../../../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-16" src="../../../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-17" src="../../../chrome/site/images/star-black-medium.gif" width="21px" height="21px" alt="Star"/>
<img id="star-18" src="../../../chrome/site/images/star-black-tiny.gif" width="13px" height="13px" alt="Star"/>
<img id="star-19" src="../../../chrome/site/images/star-black-tiny.gif" width="9px" height="9px" alt="Star"/>
<img id="star-20" src="../../../chrome/site/images/star-black-tiny.gif" width="10px" height="10px" alt="Star"/>
<img id="star-21" src="../../../chrome/site/images/star-black-medium.gif" width="21px" height="21px" alt="Star"/>
<img id="star-22" src="../../../chrome/site/images/star-black-small.gif" width="14px" height="14px" alt="Star"/>
<img id="star-23" src="../../../chrome/site/images/star-black-small.gif" width="13px" height="13px" alt="Star"/>
</div>
<img id="banner-bottom-left" src="../../../chrome/site/images/banner-bottom-left.gif" width="20px" height="19px" alt="Bottom left banner image"/>
<img id="banner-bottom-right" src="../../../chrome/site/images/banner-bottom-right.gif" width="20px" height="19px" alt="Bottom right banner image"/>
<div id="login"><a href="http://librocket.com/login">Login</a> | <a "http://librocket.com/wiki/documentation/C%2B%2BManual/href">Register</a></div>
<div id="breadcrumbs">
<a href="../../documentation.html">documentation</a> <strong>&#8249;</strong> <a href="http://librocket.com/wiki/documentation/C++Manual">C++Manual</a> <strong>&#8249;</strong> <a href="http://librocket.com/wiki/documentation/C++Manual/Input">Input</a></div>
<div id="title"> Input</div>
<div id="second-level-nav">
<span class="nav-item active"><a href="../../documentation.html">Documentation</a></span>
<span class="nav-item"><a accesskey="4" href="http://librocket.com/search">Search</a></span>
</div>
</div>
<div id="content-container">
<div id="content" class="wiki">
<div class="wikipage">
<div id="searchable"><p>
<div class="wiki-toc"><h4>Contents</h4><ol><li><a href="Input.html#Userinput">User input</a><ol><li><a href="Input.html#Keymodifiers">Key modifiers</a></li><li>
<a href="Input.html#Mouseinput">Mouse input</a><ol><li><a href="Input.html#Mousemovement">Mouse movement</a></li><li>
<a href="Input.html#Mousebuttons">Mouse buttons</a></li><li>
<a href="Input.html#Mousewheel">Mouse wheel</a></li></ol><li><a href="Input.html#Keyinput">Key input</a></li><li>
<a href="Input.html#Textinput">Text input</a></li><li>
<a href="Input.html#Sampleinputprocessing">Sample input processing</a></li></ol></li></ol></div>
</p>
<h1 id="Userinput">User input</h1>
<p>
Rocket does not read user input, but requires the application to feed its contexts with input events. Each context will process the input it is provided with and dispatch events as appropriate.
</p>
<h2 id="Keymodifiers">Key modifiers</h2>
<p>
Most of the input functions take the parameter 'key_modifier_state'. This is a bitmask of active key modifiers; keys such as Control, Alt, etc, as well as the lock keys. This is used to generate the key modifier parameters on any events that are spawned, so is entirely optional. If you don't want or need the key modifier parameters on your input events, feel free to pass '0' for the key_modifier_state into all the input functions you call.
</p>
<p>
The bitmask should be configured using the enumeration Rocket::Core::Input::KeyModifier, detailed below:
</p>
<pre class="wiki">enum KeyModifier
{
	KM_CTRL = 1 &lt;&lt; 0,	// Set if at least one Ctrl key is depressed.
	KM_SHIFT = 1 &lt;&lt; 1,	// Set if at least one Shift key is depressed.
	KM_ALT = 1 &lt;&lt; 2,	// Set if at least one Alt key is depressed.
	KM_META = 1 &lt;&lt; 3,	// Set if at least one Meta key (the command key) is depressed.
	KM_CAPSLOCK = 1 &lt;&lt; 4,	// Set if caps lock is enabled.
	KM_NUMLOCK = 1 &lt;&lt; 5,	// Set if num lock is enabled.
	KM_SCROLLLOCK = 1 &lt;&lt; 6	// Set if scroll lock is enabled.
};
</pre><p>
See the documentation on <a class="wiki" href="../RML/Events.html#Events">RML events</a> for a specification of the key modifier events parameters.
</p>
<h2 id="Mouseinput">Mouse input</h2>
<p>
Different aspects of mouse input are given to a context through a variety of functions, detailed below.
</p>
<h3 id="Mousemovement">Mouse movement</h3>
<p>
Call the ProcessMouseMove() function on a context to inform the context that the position of the mouse cursor within the context has changed.
</p>
<pre class="wiki">// Sends a mouse movement event into this context.
// @param[in] x The x-coordinate of the mouse cursor.
// @param[in] y The y-coordinate of the mouse cursor.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessMouseMove(int x, int y, int key_modifier_state);
</pre><p>
Note that the x and y coordinates are in pixel offsets from the top-left of the context. If the position of the mouse cursor is not different from the last time ProcessMouseMove() was called, no action will be taken. If the mouse has moved, then any of the following events may be generated, targeted at the appropriate elements:
</p>
<ul><li>onmousemove
</li><li>onmouseover
</li><li>onmouseout
</li><li>ondragstart
</li><li>ondrag
</li><li>ondragover
</li><li>ondragout
</li></ul><h3 id="Mousebuttons">Mouse buttons</h3>
<p>
Call ProcessMouseButtonDown() and ProcessMouseButtonUp() on a context to to inform the context when a mouse button is pressed or released.
</p>
<pre class="wiki">// Sends a mouse-button down event into this context.
// @param[in] button_index The index of the button that was pressed; 0 for the left button, 1 for right, and any others from 2 onwards.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessMouseButtonDown(int button_index, int key_modifier_state);

// Sends a mouse-button up event into this context.
// @param[in] button_index The index of the button that was release; 0 for the left button, 1 for right, and any others from 2 onwards.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessMouseButtonUp(int button_index, int key_modifier_state);
</pre><p>
ProcessMouseButtonDown() may generate any of the following events:
</p>
<ul><li>onfocus
</li><li>onblur
</li><li>onmousedown
</li></ul><p>
ProcessMouseButtonUp() may generate:
</p>
<ul><li>onmouseup
</li><li>onclick
</li><li>ondblclick
</li><li>ondragdrop
</li><li>ondragend
</li></ul><h3 id="Mousewheel">Mouse wheel</h3>
<p>
If you want to send mouse-wheel events to your documents, call the ProcessMouseWheel() function on your contexts as appropriate.
</p>
<pre class="wiki">// Sends a mouse-wheel movement event into this context.
// @param[in] wheel_delta The mouse-wheel movement this frame. Rocket treats a negative delta as up movement (away from the user), positive as down.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessMouseWheel(int wheel_delta, int key_modifier_state);
</pre><p>
ProcessMouseWheel() will generate an 'onmousescroll' event targeted at the hover element. By default, all elements will use this event to scroll their contents up and down if appropriate.
</p>
<h2 id="Keyinput">Key input</h2>
<p>
The key input functions use the KeyIdentifier enumeration found in &lt;Rocket/Core/Input.h&gt;; refer to that file for the possible values. They are modeled after the Windows virtual key codes (the VK_* enumeration), so should be familiar to Windows developers. Any confusing enumeration names are explained in the comments.
</p>
<p>
Rocket makes a distinction between <i>key input</i> and <i>text input</i>; key input (specified by the ProcessKeyDown() and ProcessKeyUp() functions) refers to actual physical key presses, while text input refers to characters being generated from user input. Depending on user locale, it may take more than one physical key stroke to generate a single character of text input. At present, Rocket offers no translation between key input and text input; that is left up to the application.
</p>
<p>
Call the following functions on a context to inform the context of key presses or releases:
</p>
<pre class="wiki">// Sends a key down event into this context.
// @param[in] key_identifier The key pressed.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessKeyDown(Rocket::Core::Input::KeyIdentifier key_identifier, int key_modifier_state);

// Sends a key up event into this context.
// @param[in] key_identifier The key released.
// @param[in] key_modifier_state The state of key modifiers.
void ProcessKeyUp(Rocket::Core::Input::KeyIdentifier key_identifier, int key_modifier_state);
</pre><p>
ProcessKeyDown() will generate an 'onkeydown' event targeted at the current focus element (if an element is in focus). ProcessKeyUp() will likewise generate the 'onkeyup' event.
</p>
<h2 id="Textinput">Text input</h2>
<p>
Rocket takes text input as 16-bit, UCS2-encoded characters. When text input occurs that you wish a Rocket context to know about, use the following functions:
</p>
<pre class="wiki">// Sends a single character of text as text input into this context.
// @param[in] character The UCS-2 character to send into this context.
void ProcessTextInput(EMP::Core::word character);

// Sends a string of text as text input into this context.
// @param[in] string The UCS-2 string to send into this context.
void ProcessTextInput(const Rocket::Core::String&amp; string);
</pre><p>
These functions will generate an 'ontextinput' event targeted at the context's current focus element (if there is one).
</p>
<h2 id="Sampleinputprocessing">Sample input processing</h2>
<p>
The sample shell (found under your Rocket installation at /samples/shell/) contains a sample implementation of input processing for all of Rocket's supported platforms, including a key-to-text converter for a US-keyboard layout (see /samples/shell/src/Input.cpp).
</p>
</div>
</div>
<script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
</div>
</div>
</div>
<div id="footer">
<a id="tracpowered" href="http://trac.edgewall.org/">
<img src="../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered"/>
</a>
<p class="left">
Powered by <a href="http://librocket.com/about"><strong>Trac </strong></a><br/>By <a href="http://www.edgewall.org/">Edgewall Software</a>.
</p>
<p id="copyright" class="left clear">
Copyright &copy; 2007-2010 Code Point Ltd, Shift Technology Ltd.
</p>
<ul class="top-level-nav">
<li><a href="../../frontend/features.html">features.</a></li>
<li><a "http://librocket.com/wiki/documentation/C%2B%2BManual/href">download.</a></li>
<li><a href="http://forums.librocket.com">forums.</a></li>
<li><a href="../../documentation.html">developer.</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-3379591-1");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>
</body>
</html>
